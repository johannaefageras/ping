<!doctype html>
<html lang="sv">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Ping</title>
    <link rel="stylesheet" href="style.css" />

  </head>
  <body>
    <!-- Auth screen: login / signup -->
    <div id="auth-screen" class="hidden">
      <div id="auth-box">
        <h1>&#9656; PING_</h1>
        <div id="auth-tabs">
          <button class="tab active" data-tab="login">Logga in</button>
          <button class="tab" data-tab="signup">Skapa konto</button>
        </div>

        <form id="login-form">
          <input
            type="email"
            id="login-email"
            placeholder="E-post..."
            autocomplete="email"
            required
          />
          <input
            type="password"
            id="login-password"
            placeholder="L&ouml;senord..."
            autocomplete="current-password"
            required
          />
          <button type="submit">&gt; LOGGA IN</button>
          <a href="#" id="forgot-link">Gl&ouml;mt l&ouml;senordet?</a>
        </form>

        <form id="forgot-form" class="hidden">
          <p id="forgot-description">
            Ange din e-postadress s&aring; skickar vi en &aring;terst&auml;llningsl&auml;nk.
          </p>
          <input
            type="email"
            id="forgot-email"
            placeholder="E-post..."
            autocomplete="email"
            required
          />
          <button type="submit">&gt; SKICKA L&Auml;NK</button>
          <a href="#" id="forgot-back-link">&larr; Tillbaka till inloggning</a>
        </form>

        <form id="reset-form" class="hidden">
          <p id="reset-description">V&auml;lj ett nytt l&ouml;senord.</p>
          <input
            type="password"
            id="reset-password"
            placeholder="Nytt l&ouml;senord (minst 6 tecken)..."
            autocomplete="new-password"
            required
            minlength="6"
          />
          <input
            type="password"
            id="reset-password-confirm"
            placeholder="Bekr&auml;fta l&ouml;senord..."
            autocomplete="new-password"
            required
            minlength="6"
          />
          <button type="submit">&gt; SPARA L&Ouml;SENORD</button>
        </form>

        <form id="signup-form" class="hidden">
          <input
            type="email"
            id="signup-email"
            placeholder="E-post..."
            autocomplete="email"
            required
          />
          <input
            type="text"
            id="signup-username"
            placeholder="Anv&auml;ndarnamn..."
            autocomplete="username"
            required
            pattern="[a-zA-Z0-9_]{3,20}"
            title="3&ndash;20 tecken: bokst&auml;ver, siffror, understreck"
          />
          <input
            type="password"
            id="signup-password"
            placeholder="L&ouml;senord (minst 6 tecken)..."
            autocomplete="new-password"
            required
            minlength="6"
          />
          <button type="submit">&gt; SKAPA KONTO</button>
        </form>

        <div id="auth-error" class="hidden"></div>
      </div>
    </div>

    <!-- Main app -->
    <div id="app" class="hidden">
      <aside id="sidebar">
        <div id="user-info">
          <span id="current-username"></span>
          <button id="logout-btn">Logga ut</button>
        </div>

        <div id="add-contact">
          <form id="add-contact-form">
            <input
              type="text"
              id="contact-search"
              placeholder="S&ouml;k anv&auml;ndarnamn..."
              autocomplete="off"
            />
            <button type="submit">+</button>
          </form>
          <div id="contact-search-result" class="hidden"></div>
        </div>

        <div id="pending-requests" class="hidden">
          <h3>F&ouml;rfr&aring;gningar</h3>
          <div id="pending-list"></div>
        </div>

        <div id="contacts-section">
          <h3>Kontakter</h3>
          <div id="contacts-list"></div>
        </div>
      </aside>

      <div id="chat-area">
        <div id="chat-placeholder">
          <p>V&auml;lj en kontakt f&ouml;r att b&ouml;rja pinga</p>
        </div>

        <div id="chat-view" class="hidden">
          <header id="chat-header">
            <h2 id="chat-contact-name"></h2>
          </header>

          <main id="chat-main">
            <div id="board"></div>
            <div id="drop-zone">
              <div id="drop-zone-inner">
                <span class="drop-icon">&darr;</span>
                <p>
                  Sl&auml;pp filer h&auml;r eller
                  <label for="file-input" class="file-label">klicka</label>
                </p>
              </div>
              <input type="file" id="file-input" multiple hidden />
            </div>
          </main>

          <footer>
            <form id="text-form">
              <input
                type="text"
                id="text-input"
                placeholder="Skriv ett meddelande eller klistra in en l&auml;nk..."
                autocomplete="off"
              />
              <button type="submit">&gt; SKICKA</button>
            </form>
          </footer>
        </div>
      </div>
    </div>

    <audio id="ping-sound" preload="auto">
      <source src="ping.wav" type="audio/wav" />
    </audio>

    <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
    <script src="app.js"></script>
  </body>
</html>
